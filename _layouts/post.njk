{% from "../node_modules/@dh253/nds/macros/layout.njk" import header, footer %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>{{title}}</title>
    <meta name="description" content="{{description}}" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

    <meta property="og:title" content="{{title}}" />
    <meta property="og:description" content="{{description}}" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="{{page.url}}" />
    <meta property="og:image" content="{{ site.url }}/img/og/{{ date | postDate }}-{{ title | slug }}.jpeg" />

    <link rel="canonical" href="{{ site.url }}{{ canonicalUrl or page.url }}" />

    <link rel="icon" type="image/png" sizes="196x196" href="/favicon/favicon-196.png">
    <link rel="apple-touch-icon" href="/favicon/apple-icon-180.png">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2048-2732.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2732-2048.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1668-2388.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2388-1668.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1536-2048.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2048-1536.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1668-2224.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2224-1668.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1620-2160.png" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2160-1620.png" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1290-2796.png" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2796-1290.png" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1179-2556.png" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2556-1179.png" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1284-2778.png" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2778-1284.png" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1170-2532.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2532-1170.png" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1125-2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2436-1125.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1242-2688.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2688-1242.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-828-1792.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1792-828.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1242-2208.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-2208-1242.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-750-1334.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1334-750.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-640-1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="/favicon/apple-splash-1136-640.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    
    <meta name="theme-color" content="#566500" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#bdd062" media="(prefers-color-scheme: dark)">
    <link href="/manifest.webmanifest" rel="manifest">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

    <link rel="stylesheet" href="/index.min.css">
    <link rel="stylesheet" href="/overrides.css">

    <script src="/index.min.js"></script>
    <script src="https://cdn.usefathom.com/script.js" data-site="VCCTYWMM" defer></script>
    <script>
    if ('serviceWorker' in navigator)
        navigator.serviceWorker.register('/sw.js')
    </script>
</head>

<body class="theme-background">
    {% commonicons %}
    {% siteicons %}
    {{ header({ config: site.navigation, type: type }) }}

    <main>
      {% if site.posts.start %}
        {% for key, region in site.posts.start %}
              {% if region.local === true %}
                  {% set src = "layouts/" + region.layout + ".njk" %}
                  {% set props = region %}
                  {% set navigation = site.navigation %}
                  {% include src %}
              {% else %}
                  {{ layout(region, site.navigation) }}
              {% endif %}
          {% endfor %}
      {% endif %}

      <article class="region inset prose prose-l">
        <header class="stack gap-xs">
          {# Breadcrumb #}
          <h1 class="page-headline">{{ title }}</h1>
          {% set wc = content | striptags | wordcount %} {% set wPerMinute = (wc /
          240) + 1 %}
          <ul class="cluster gap-xs no-marker">
            <li class="not-prose color-primary">{{ page.date | readableDate }}</li>
            <li class="not-prose color-primary">
              {{ wPerMinute | round }} min read.
            </li>
          </ul>
        </header>

        <hr class="outline" />
        {{ content | safe }}
      </article>

      {% if site.posts.end %}
        {% for key, region in site.posts.end %}
              {% if region.local === true %}
                  {% set src = "layouts/" + region.layout + ".njk" %}
                  {% set props = region %}
                  {% set navigation = site.navigation %}
                  {% include src %}
              {% else %}
                  {{ layout(region, site.navigation) }}
              {% endif %}
          {% endfor %}
      {% endif %}
    </main>

    {{ footer({ config: site.navigation, class: 'gap' }) }}

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "{{ title }}",
        "image": [],
        "author": "{{ metadata.author.name }}",
        "genre": "{{ metadata.genre }}",
        "publisher": {
          "@type": "Organization",
          "name": "{{ metadata.publisher.name }}",
          "logo": {
            "@type": "ImageObject",
            "url": "{{ 'favicon/manifest-icon-192.maskable.png' }}"
          }
        },
        "url": "{{ metadata.url }}{{ canonicalUrl or page.url }}",
        "mainEntityOfPage": "{{ metadata.url }}{{ canonicalUrl or page.url }}",
        "datePublished": "{{ page.date | htmlDateString }}",
        "dateModified": "{{ page.inputPath | lastModifiedDate  | htmlDateString }}",
        "description": "{{ content | striptags | truncate(140) }}"
      }
    </script>
</body>

</html>